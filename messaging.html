<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuvWork Coach</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            max-width: 400px;
            margin: 0 auto;
            height: 100vh;
            background: #000;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Status Bar */
        .status-bar {
            background: #000;
            color: #fff;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            font-weight: 600;
        }

        .time {
            font-size: 16px;
        }

        /* Header */
        .chat-header {
            background: rgba(28, 28, 30, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 0.5px solid rgba(84, 84, 88, 0.3);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .back-button {
            color: #007AFF;
            font-size: 16px;
            background: none;
            border: none;
            cursor: pointer;
        }

        .contact-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .contact-name {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
        }

        .contact-status {
            color: #98989A;
            font-size: 12px;
        }

        .contact-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4ECDC4, #3377DF);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        /* Messages Container */
        .messages-container {
            flex: 1;
            background: #000;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .message {
            max-width: 80%;
            animation: messageSlide 0.3s ease-out;
        }

        .message.coach {
            align-self: flex-start;
        }

        .message.user {
            align-self: flex-end;
        }

        .message-bubble {
            padding: 10px 14px;
            border-radius: 18px;
            word-wrap: break-word;
            position: relative;
            line-height: 1.4;
        }

        .message.coach .message-bubble {
            background: #2C2C2E;
            color: #fff;
            border-bottom-left-radius: 4px;
        }

        .message.user .message-bubble {
            background: #007AFF;
            color: #fff;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 11px;
            color: #98989A;
            margin-top: 4px;
            text-align: center;
        }

        .message.coach .message-time {
            text-align: left;
        }

        .message.user .message-time {
            text-align: right;
        }

        /* Typing Indicator */
        .typing-indicator {
            align-self: flex-start;
            max-width: 60px;
        }

        .typing-bubble {
            background: #2C2C2E;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            padding: 10px 14px;
            display: flex;
            gap: 3px;
            align-items: center;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #98989A;
            border-radius: 50%;
            animation: typing 1.5s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        /* Quick Replies */
        .quick-replies {
            padding: 0 16px 8px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .quick-reply {
            background: rgba(44, 44, 46, 0.8);
            color: #007AFF;
            border: 1px solid #007AFF;
            border-radius: 16px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-reply:hover {
            background: #007AFF;
            color: #fff;
        }

        /* Input Area */
        .input-container {
            background: rgba(28, 28, 30, 0.95);
            backdrop-filter: blur(20px);
            border-top: 0.5px solid rgba(84, 84, 88, 0.3);
            padding: 8px 16px 20px;
            display: flex;
            align-items: flex-end;
            gap: 8px;
        }

        .input-wrapper {
            flex: 1;
            background: #2C2C2E;
            border-radius: 20px;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            min-height: 36px;
        }

        .message-input {
            flex: 1;
            background: none;
            border: none;
            color: #fff;
            font-size: 16px;
            outline: none;
            resize: none;
            max-height: 100px;
            overflow-y: auto;
        }

        .message-input::placeholder {
            color: #98989A;
        }

        .send-button {
            width: 36px;
            height: 36px;
            background: #007AFF;
            border: none;
            border-radius: 50%;
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:disabled {
            background: #48484A;
            cursor: not-allowed;
            transform: none;
        }

        /* Special message types */
        .affirmation {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4) !important;
            color: white !important;
            font-style: italic;
        }

        .insight-message {
            background: linear-gradient(135deg, #667eea, #764ba2) !important;
            color: white !important;
        }

        .assessment-message {
            background: linear-gradient(135deg, #f093fb, #f5576c) !important;
            color: white !important;
        }

        /* Animations */
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-8px);
                opacity: 1;
            }
        }

        /* Scrollbar styling */
        .messages-container::-webkit-scrollbar {
            width: 2px;
        }

        .messages-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 1px;
        }

        /* Hidden elements */
        .hidden {
            display: none !important;
        }

        .new-message {
            animation: pulse 0.5s ease-out;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="time" id="currentTime">9:41</div>
        </div>

        <!-- Chat Header -->
        <div class="chat-header">
            <button class="back-button">â€¹</button>
            <div class="contact-info">
                <div class="contact-name">LuvWork Coach</div>
                <div class="contact-status" id="coachStatus">Always here to help</div>
            </div>
            <div class="contact-avatar">LW</div>
        </div>

        <!-- Messages Container -->
        <div class="messages-container" id="messagesContainer">
        </div>

        <!-- Quick Replies -->
        <div class="quick-replies hidden" id="quickReplies"></div>

        <!-- Input Area -->
        <div class="input-container">
            <div class="input-wrapper">
                <textarea class="message-input" id="messageInput" placeholder="Message" rows="1"></textarea>
            </div>
            <button class="send-button" id="sendButton" disabled>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // App State
        let conversationHistory = [];
        let userProfile = {
            name: null,
            interactionCount: 0,
            themes: [],
            sentiment: 'neutral',
            personalityType: null
        };

        // Coaching Content
        const coachingResponses = {
            welcome: [
                "I'm your LuvWork coach. I'm here to help you discover more joy and fulfillment in your work.",
                "I'm excited to explore how we can make your work more energizing and meaningful.",
                "Whether you're reflecting on today or thinking about tomorrow, I'm here to support you."
            ],
            
            personalizedResponses: {
                positive: [
                    "I can hear the positive energy in what you're sharing! That's wonderful.",
                    "That enthusiasm is one of your greatest professional assets.",
                    "What do you think is creating that positive feeling?"
                ],
                challenging: [
                    "I can sense this is weighing on you. What would feel most supportive right now?",
                    "That sounds really challenging. What's helped you handle similar situations before?",
                    "What support would make the biggest difference?"
                ],
                neutral: [
                    "Tell me more about that. What feels most important to explore?",
                    "What's been on your mind about work lately?",
                    "How are you feeling about your work experience right now?"
                ]
            },

            followUpQuestions: {
                development: "What kind of growth would have the biggest impact on your work satisfaction?",
                relationships: "How do the relationships at work affect your daily experience?",
                purpose: "When you think about meaningful work, what resonates most with you?",
                timeManagement: "What would change if you had more control over your work time?"
            },

            affirmations: [
                "Your willingness to reflect on your work shows real wisdom.",
                "The questions you're asking are already transforming how you show up.",
                "Your growth mindset is creating new possibilities.",
                "You're recognizing your own power to shape your experience."
            ]
        };

        // DOM Elements
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const quickReplies = document.getElementById('quickReplies');
        const coachStatus = document.getElementById('coachStatus');
        const currentTime = document.getElementById('currentTime');

        // Initialize App
        function initializeApp() {
            updateTime();
            setInterval(updateTime, 1000);
            setupEventListeners();
            startConversation();
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: 'numeric', minute: '2-digit'});
            currentTime.textContent = timeString;
        }

        function setupEventListeners() {
            messageInput.addEventListener('input', handleInputChange);
            messageInput.addEventListener('keypress', handleKeyPress);
            sendButton.addEventListener('click', sendUserMessage);
        }

        function handleInputChange() {
            const hasText = messageInput.value.trim().length > 0;
            sendButton.disabled = !hasText;
            
            messageInput.style.height = 'auto';
            messageInput.style.height = messageInput.scrollHeight + 'px';
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!sendButton.disabled) {
                    sendUserMessage();
                }
            }
        }

        function addMessage(content, isUser = false, messageType = 'normal', delay = 0) {
            setTimeout(() => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user' : 'coach'} new-message`;
                
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = `message-bubble ${messageType}`;
                bubbleDiv.textContent = content;
                
                const timeDiv = document.createElement('div');
                timeDiv.className = 'message-time';
                timeDiv.textContent = new Date().toLocaleTimeString([], {hour: 'numeric', minute: '2-digit'});
                
                messageDiv.appendChild(bubbleDiv);
                messageDiv.appendChild(timeDiv);
                messagesContainer.appendChild(messageDiv);
                
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                conversationHistory.push({
                    content,
                    isUser,
                    messageType,
                    timestamp: new Date()
                });
            }, delay);
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message coach typing-indicator';
            typingDiv.id = 'typingIndicator';
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'typing-bubble';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                bubbleDiv.appendChild(dot);
            }
            
            typingDiv.appendChild(bubbleDiv);
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            coachStatus.textContent = "typing...";
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            coachStatus.textContent = "Always here to help";
        }

        function showQuickReplies(replies) {
            quickReplies.innerHTML = '';
            
            replies.forEach(reply => {
                const button = document.createElement('button');
                button.className = 'quick-reply';
                button.textContent = reply;
                button.onclick = () => selectQuickReply(reply);
                quickReplies.appendChild(button);
            });
            
            quickReplies.classList.remove('hidden');
        }

        function hideQuickReplies() {
            quickReplies.classList.add('hidden');
        }

        function selectQuickReply(reply) {
            addMessage(reply, true);
            hideQuickReplies();
            handleUserResponse(reply);
        }

        function sendUserMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            addMessage(message, true);
            messageInput.value = '';
            messageInput.style.height = 'auto';
            sendButton.disabled = true;
            hideQuickReplies();
            
            handleUserResponse(message);
        }

        function handleUserResponse(response) {
            userProfile.interactionCount++;

            // Handle name detection
            if (!userProfile.name && userProfile.interactionCount === 1 && 
                response.length < 30 && !response.includes('?')) {
                userProfile.name = response.trim();
                
                setTimeout(() => {
                    addMessage(`Nice to meet you, ${userProfile.name}! I'm genuinely excited to be part of your journey toward more fulfilling work.`);
                }, 1000);
                
                setTimeout(() => {
                    addMessage("What's been on your mind about work lately?");
                    showQuickReplies(['Feeling stuck', 'Want more growth', 'Seeking purpose', 'Need better balance', 'Just exploring']);
                }, 2500);
                
                return;
            }

            // Analyze response
            const analysis = analyzeResponse(response);
            updateUserProfile(analysis);

            // Generate response
            setTimeout(() => {
                generateResponse(response, analysis);
            }, Math.random() * 1000 + 500);
        }

        function analyzeResponse(response) {
            const lowerResponse = response.toLowerCase();
            
            let sentiment = 'neutral';
            const positiveWords = ['good', 'great', 'love', 'excited', 'happy', 'energized'];
            const negativeWords = ['bad', 'frustrated', 'stressed', 'difficult', 'stuck'];
            
            if (positiveWords.some(word => lowerResponse.includes(word))) {
                sentiment = 'positive';
            } else if (negativeWords.some(word => lowerResponse.includes(word))) {
                sentiment = 'challenging';
            }

            const themes = [];
            if (lowerResponse.includes('team') || lowerResponse.includes('colleague')) {
                themes.push('relationships');
            }
            if (lowerResponse.includes('learn') || lowerResponse.includes('grow')) {
                themes.push('development');
            }
            if (lowerResponse.includes('purpose') || lowerResponse.includes('meaning')) {
                themes.push('purpose');
            }
            if (lowerResponse.includes('time') || lowerResponse.includes('busy')) {
                themes.push('timeManagement');
            }

            return { sentiment, themes };
        }

        function updateUserProfile(analysis) {
            userProfile.sentiment = analysis.sentiment;
            analysis.themes.forEach(theme => {
                if (!userProfile.themes.includes(theme)) {
                    userProfile.themes.push(theme);
                }
            });
        }

        function generateResponse(userMessage, analysis) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                // Check if it's time for recommendations
                if (userProfile.readyForRecommendations && userProfile.interactionCount >= 3) {
                    generateRecommendations();
                    userProfile.readyForRecommendations = false; // Don't show again immediately
                    return;
                }
                
                // Select appropriate response
                const responses = coachingResponses.personalizedResponses[analysis.sentiment];
                const response = responses[Math.floor(Math.random() * responses.length)];
                
                addMessage(response, false, analysis.sentiment === 'challenging' ? 'insight-message' : 'normal');
                
                // Add follow-up if not showing recommendations yet
                if (userProfile.interactionCount < 3) {
                    setTimeout(() => {
                        if (analysis.themes.length > 0) {
                            const theme = analysis.themes[0];
                            const followUp = coachingResponses.followUpQuestions[theme];
                            if (followUp) {
                                addMessage(followUp, false, 'assessment-message');
                                
                                // Add appropriate quick replies
                                let replies = [];
                                if (theme === 'development') {
                                    replies = ['Leadership skills', 'Technical expertise', 'Communication', 'Creative thinking'];
                                } else if (theme === 'relationships') {
                                    replies = ['Very energizing', 'Mostly positive', 'Mixed', 'Often draining'];
                                } else if (theme === 'purpose') {
                                    replies = ['Making an impact', 'Using my strengths', 'Helping others', 'Creating something'];
                                } else if (theme === 'timeManagement') {
                                    replies = ['More focus time', 'Better priorities', 'Less meetings', 'More flexibility'];
                                } else if (theme === 'leadership') {
                                    replies = ['Leading projects', 'Mentoring others', 'Making decisions', 'Driving change'];
                                } else if (theme === 'creativity') {
                                    replies = ['New ideas', 'Different approaches', 'Innovation', 'Creative solutions'];
                                }
                                
                                if (replies.length > 0) {
                                    showQuickReplies(replies);
                                }
                            }
                        } else {
                            // General follow-up
                            addMessage("What would you most like to explore about your work experience?", false, 'normal');
                            showQuickReplies(['My daily energy', 'Career growth', 'Work relationships', 'Finding purpose']);
                        }
                    }, 2000);
                } else {
                    // After recommendations, keep conversation going
                    setTimeout(() => {
                        addMessage("How do these suggestions land with you? What feels most actionable?", false, 'normal');
                    }, 8000); // Wait for recommendations to finish
                }
                
                // Add affirmation occasionally
                if (Math.random() > 0.5 && userProfile.interactionCount < 3) {
                    setTimeout(() => {
                        const affirmation = coachingResponses.affirmations[Math.floor(Math.random() * coachingResponses.affirmations.length)];
                        addMessage(affirmation, false, 'affirmation');
                    }, 4000);
                }
                
            }, Math.random() * 2000 + 1000);
        }

        function startConversation() {
            const hour = new Date().getHours();
            let greeting = "";
            
            if (hour < 12) {
                greeting = "Good morning! " + coachingResponses.welcome[0];
            } else if (hour < 17) {
                greeting = "Good afternoon! " + coachingResponses.welcome[1];
            } else {
                greeting = "Good evening! " + coachingResponses.welcome[2];
            }
            
            setTimeout(() => {
                addMessage(greeting);
            }, 1000);
            
            setTimeout(() => {
                addMessage("I'd love to get to know you better. What's your name?");
            }, 2500);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
